/**
 * @license Angulartics v0.15.20
 * (c) 2013 Luis Farzati http://luisfarzati.github.io/angulartics
 * License: MIT
 */
(function(n){"use strict";var t=window.angulartics||(window.angulartics={});t.waitForVendorApi=function(n,i,r,u){u||(u=r,r=undefined);Object.prototype.hasOwnProperty.call(window,n)&&(r===undefined||window[n][r]!==undefined)?u(window[n]):setTimeout(function(){t.waitForVendorApi(n,i,r,u)},i)};n.module("angulartics",[]).provider("$analytics",function(){var r={pageTracking:{autoTrackFirstPage:!0,autoTrackVirtualPages:!0,trackRelativePath:!1,autoBasePath:!1,basePath:"",bufferFlushDelay:1e3},eventTracking:{bufferFlushDelay:1e3}},i={pageviews:[],events:[],setUsername:[],setUserProperties:[],setUserPropertiesOnce:[]},u=function(n){i.pageviews.push(n)},f=function(n,t){i.events.push({name:n,properties:t})},e=function(n){i.setUsername.push(n)},o=function(n){i.setUserProperties.push(n)},s=function(n){i.setUserPropertiesOnce.push(n)},t={settings:r,pageTrack:u,eventTrack:f,setUsername:e,setUserProperties:o,setUserPropertiesOnce:s},h=function(u){t.pageTrack=u;n.forEach(i.pageviews,function(n,i){setTimeout(function(){t.pageTrack(n)},i*r.pageTracking.bufferFlushDelay)})},c=function(u){t.eventTrack=u;n.forEach(i.events,function(n,i){setTimeout(function(){t.eventTrack(n.name,n.properties)},i*r.eventTracking.bufferFlushDelay)})},l=function(u){t.setUsername=u;n.forEach(i.setUsername,function(n,i){setTimeout(function(){t.setUsername(n)},i*r.pageTracking.bufferFlushDelay)})},a=function(u){t.setUserProperties=u;n.forEach(i.setUserProperties,function(n,i){setTimeout(function(){t.setUserProperties(n)},i*r.pageTracking.bufferFlushDelay)})},v=function(u){t.setUserPropertiesOnce=u;n.forEach(i.setUserPropertiesOnce,function(n,i){setTimeout(function(){t.setUserPropertiesOnce(n)},i*r.pageTracking.bufferFlushDelay)})};return{$get:function(){return t},settings:r,virtualPageviews:function(n){this.settings.pageTracking.autoTrackVirtualPages=n},firstPageview:function(n){this.settings.pageTracking.autoTrackFirstPage=n},withBase:function(t){this.settings.pageTracking.basePath=t?n.element("base").attr("href").slice(0,-1):""},withAutoBase:function(n){this.settings.pageTracking.autoBasePath=n},registerPageTrack:h,registerEventTrack:c,registerSetUsername:l,registerSetUserProperties:a,registerSetUserPropertiesOnce:v}}).run(["$rootScope","$location","$window","$analytics","$injector",function(n,t,i,r,u){var f,e,h,o,c,s;if(r.settings.pageTracking.autoTrackFirstPage){if(f=!0,u.has("$route")){e=u.get("$route");for(h in e.routes){f=!1;break}}else if(u.has("$state")){o=u.get("$state");for(c in o.states){f=!1;break}}else f=!1;f&&(r.settings.pageTracking.autoBasePath&&(r.settings.pageTracking.basePath=i.location.pathname),r.settings.trackRelativePath?(s=r.settings.pageTracking.basePath+t.url(),r.pageTrack(s)):r.pageTrack(t.absUrl()))}r.settings.pageTracking.autoTrackVirtualPages&&(r.settings.pageTracking.autoBasePath&&(r.settings.pageTracking.basePath=i.location.pathname+"#"),u.has("$route")&&n.$on("$routeChangeSuccess",function(n,i){if(!i||!(i.$$route||i).redirectTo){var u=r.settings.pageTracking.basePath+t.url();r.pageTrack(u)}}),u.has("$state")&&n.$on("$stateChangeSuccess",function(){var n=r.settings.pageTracking.basePath+t.url();r.pageTrack(n)}))}]).directive("analyticsOn",["$analytics",function(t){function i(n){return["a:","button:","button:button","button:submit","input:button","input:submit"].indexOf(n.tagName.toLowerCase()+":"+(n.type||""))>=0}function r(n){return i(n),"click"}function u(n){return i(n)?n.innerText||n.value:n.id||n.name||n.tagName}function f(n){return n.substr(0,9)==="analytics"&&["On","Event"].indexOf(n.substr(9))===-1}return{restrict:"A",scope:!1,link:function(i,e,o){var s=o.analyticsOn||r(e[0]);n.element(e[0]).bind(s,function(){var r=o.analyticsEvent||u(e[0]),i={};n.forEach(o.$attr,function(n,t){f(t)&&(i[t.slice(9).toLowerCase()]=o[t])});t.eventTrack(r,i)})}}}])})(angular);
/*
//# sourceMappingURL=angulartics.min.js.map
*/